import subprocess
import sys
import platform
from pathlib import Path

def create_conda_env(env_name, python_version):
    if platform.system() == "Windows":
        conda_path = Path(sys.executable).parent.parent / "miniconda3" / "condabin" / "conda"
    else:
        conda_path = Path(sys.executable).parent.parent.parent / "miniconda3" / "bin" / "conda"

    process = subprocess.Popen(f'{conda_path} create --name {env_name} python={python_version} -y', shell=True)

create_conda_env("test_env; whoami", "3.9")
