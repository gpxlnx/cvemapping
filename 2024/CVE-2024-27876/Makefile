buildDir = build
CC = clang
CFLAGS += -Os -IlibAppleArchive-ExploitMaker/libNeoAppleArchive

NEOAPPLEARCHIVE_DIR = libAppleArchive-ExploitMaker/libNeoAppleArchive

output: $(buildDir)
	@ # Build libNeoAppleArchive submodule
	@echo "building libNeoAppleArchive..."
	$(MAKE) -C $(NEOAPPLEARCHIVE_DIR) EXCLUDE_AEA_SUPPORT=1
	@ # Build exploit .aar maker
	@$(CC) libAppleArchive-ExploitMaker/main.c -LlibAppleArchive-ExploitMaker/libNeoAppleArchive/build/usr/lib -LlibAppleArchive-ExploitMaker/libNeoAppleArchive/build/lzfse/lib -LlibAppleArchive-ExploitMaker/libNeoAppleArchive/build/libzbitmap/lib -o build/exploit -lNeoAppleArchive -llzfse -lzbitmap -lz $(CFLAGS)

$(buildDir):
	@echo "Creating Build Directory"
	mkdir -p build/usr/lib
	mkdir -p build/usr/bin
	mkdir -p build/obj
