import java.io.InputStream;
import java.net.URL;
import java.nio.file.Files;
import java.nio.file.Paths;

/**
 * 🚨 Simulated vulnerable Java class for CVE-2021-29427-like behavior.
 * This mimics unsafe plugin downloading from an untrusted Maven-like repo.
 */
public class VulnerableDownloader {

    public static void main(String[] args) {
        try {
            // ⚠️ Simulated untrusted plugin URL (mimicking a Maven repository)
            String pluginUrl = args.length > 0
                ? args[0]
                : "http://untrusted.example.com/plugins/fake-malware.jar";

            System.out.println("🚨 Downloading plugin from: " + pluginUrl);

            // 👇 No validation of the source — unsafe
            InputStream in = new URL(pluginUrl).openStream();
            Files.copy(in, Paths.get("downloaded-plugin.jar"));

            System.out.println("✅ Download complete — no integrity check!");

        } catch (Exception e) {
            System.out.println("❌ Error downloading plugin: " + e.getMessage());
        }
    }
}
