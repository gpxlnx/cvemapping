#!/bin/bash

echo "üîç Checking for vulnerable file..."

# Target file
VULN_FILE="VulnerableDownloader.java"

# Safe file
SAFE_FILE="SafeDownloader.java"

# If vulnerable file exists
if [ -f "$VULN_FILE" ]; then
  echo "üö® Vulnerability found in $VULN_FILE. Fixing..."

  # Remove vulnerable file
  rm "$VULN_FILE"

  # Copy safe file to replace
  cp "$SAFE_FILE" VulnerableDownloader.java

  # Git config (for commit automation)
  git config --global user.name "AutoFix Bot"
  git config --global user.email "autofix@bot.com"

  git add VulnerableDownloader.java
  git commit -m "Fix: Replaced vulnerable file with safe version"
  git push origin main

  echo "‚úÖ Vulnerability remediated and committed."
else
  echo "‚úÖ No vulnerable file found."
fi


