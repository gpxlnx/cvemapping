#vuln server
from flask import Flask, request
import os

app = Flask(__name__)

@app.route('/api/vulnerable_endpoint', methods=['POST'])
def vuln_endpoint():
    data = request.get_json()
    if data and 'data' in data:
        try:
            payload = data['data']
            script_path = "/data/data/com.termux/files/home/rev.sh"
            os.system(f"echo {payload} | base64 -d > {script_path}")
            output = os.popen(f"bash {script_path}").read()
            return f"Shell created\nOutput:\n{output}", 200
        except Exception as e:
            return f"Error: {str(e)}", 500
    return "Invalid request", 400

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)